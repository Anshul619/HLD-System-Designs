# Tech Stack

| Purpose                                           | Service                                                                                                                                    | Remarks                                                                                                                                                                                                     |
|---------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Compute instances                                 | [Amazon EC2 Instances](../11_AWSServices/3_ComputeServices/AmazonEC2/Readme.md) - High-CPU Extra-Large machines                        | Many thousands of instances in EC2 are running, with new ones spinning up every day. Instagram's Load is mostly CPU intensive.                                                                              |
| Load-Balancer                                     | [Amazon Elastic Load Balancer](../11_AWSServices/1_NetworkingAndContentDelivery/2_ApplicationNetworking/ElasticLoadBalancer/Readme.md) | SSL terminates at the ELB, which lessens the CPU load on nginx.                                                                                                                                             |
| DNS Service                                       | [Amazon Route53](../11_AWSServices/1_NetworkingAndContentDelivery/1_EdgeNetworking/AmazonRoute53/Readme.md)                            | DNS Service                                                                                                                                                                                                 |
| CDN                                               | [Amazon CloudFront](../11_AWSServices/1_NetworkingAndContentDelivery/1_EdgeNetworking/AmazonCloudFront.md)                             | We use Amazon CloudFront as our CDN, which helps with image load times from users around the world (like in Japan, our second most-popular country).                                                        |
| Main-DB - Users, Photos-Metadata, Friendship etc. | [PostgreSQL](../3_DatabaseServices/SQL-Databases/Readme.md) (partitioned, with single-follower-replica)         | Main shard cluster involves 12 Quadruple Extra-Large memory instances (db.m5.4xlarge - 16 vCPUs, 64GB Memory) (& twelve replicas in a different zone).                                                      |
| NoSQL-DB - User feed, Activities etc.             | [Cassandra](../3_DatabaseServices/NoSQL-Databases/WideColumnDB/ApacheCasandra.md)                               |                                                                                                                                                                                                             |
| Objects/File storage                              | [Amazon S3](../11_AWSServices/10_BigDataServices/StorageDBs/DataLakes/S3DataLake.md)                                                 | The photos themselves go straight to Amazon S3, which currently stores several terabytes of photo data for us.                                                                                              |
| Cache & Sessions                                  | [Redis](../3_DatabaseServices/In-Memory-DB/Redis/Readme.md)                                                     | All of Redisâ€™ data needs to fit in memory, so we end up running several Quadruple Extra-Large Memory instances for Redis, too, and occasionally shard across a few Redis instances for any given subsystem. |
| Search-DB                                         | [Apache Solr](../3_DatabaseServices/Search-Databases/ApacheSolr.md)                                             | Go-Search API                                                                                                                                                                                               |
| Message Broker                                    | [RabbitMQ](../4_MessageBrokers/RabbitMQ.md)                                                                       | Data Streaming                                                                                                                                                                                              |
| Incident Response Management                      | [PagerDuty](../8_ObservabilityLogsServices/IncidentResponse/PagerDuty.md)                                                   |                                                                                                                                                                                                             |
| Observability                                     | Pingdom                                                                                                                                    | External monitoring of the service                                                                                                                                                                          |
| Backend Language                                  | Django                                                                                                                                     |                                                                                                                                                                                                             |
| App Server                                        | Nginx, with HAProxy                                                                                                                        |                                                                                                                                                                                                             |

> Note
> - In 2014, after Facebook bought instagram, it moved its infrastructure from [AWS to Facebook on-perm servers](https://instagram-engineering.com/migrating-from-aws-to-fb-86b16f6766e)
> - But main tech stack remains same on onPerm instances like DBs, Cache, Message Broker etc.

# Read more
- :star: [What Powers Instagram: Hundreds of Instances, Dozens of Technologies?](https://instagram-engineering.com/what-powers-instagram-hundreds-of-instances-dozens-of-technologies-adf2e22da2ad)
- :star: [Scaling Instagram Infrastructure](https://www.youtube.com/watch?v=hnpzNAPiC0E)
- :star: [Scaling Instagram](https://www.slideshare.net/iammutex/scaling-instagram)
- [The Instagram Architecture Facebook Bought for a Cool Billion Dollars](http://highscalability.com/blog/2012/4/9/the-instagram-architecture-facebook-bought-for-a-cool-billio.html)
- [Sharding & IDs at Instagram](https://instagram-engineering.com/sharding-ids-at-instagram-1cf5a71e5a5c)
- [Cassandra at Instagram 2016 (Dikang Gu, Facebook) | Cassandra Summit 2016](https://www.youtube.com/watch?v=_BfMH4GQWnk)
