# Partitioning Key Tips

![](https://d2908q01vomqb2.cloudfront.net/887309d048beef83ad3eabf2a79a64a389ab1c9f/2018/09/10/dynamodb-partition-key-1.gif)

[Read more](https://aws.amazon.com/blogs/database/choosing-the-right-dynamodb-partition-key/)

# Recommendations for partition keys

| Recommendation                                     | Remarks                                                                                                                                                                                                                                        |
|----------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Use [high-cardinality](Cardinality.md) attributes  | These are attributes that have distinct values for each item, like **UUID**, emailid, employee_no, customerid, sessionid, orderid, and so on.                                                                                                  |
| Use composite attributes                           | Try to combine more than one attribute to form a unique key, if that meets your access pattern.                                                                                                                                                |
| Use Random Suffixes - Add random numbers or digits | A [randomizing strategy](RandomizingStrategy.md) can greatly improve write throughput.                                                                                                                                                         |
| Keep related data together                         | Instead of distributing related data items across multiple tables, you should keep related items in your NoSQL system as close together as possible.                                                                                           |
| Cache the popular items                            | Cache the popular items when there is a high volume of read traffic using [Redis](../../../8_InMemory-Databases/Redis/Readme.md) or [Amazon DynamoDB Accelerator (DAX)](../../../../2_AWS/6_DatabaseServices/AmazonDynamoDB/DAX.md). |

# Anti-patterns for partition keys

| Anti-pattern                                                                    | Remarks                                                                                                               |
|---------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------|
| Using [low-cardinality](Cardinality.md) attributes                              | This might lead to [hot partition](HotPartition.md) issues.                                                           |
| Use sequences or unique IDs generated by another DB engine as the partition key | Since sequences are not usually used for accessing the data (in most cases), hence it can lead to performance issues. |

# Cardinality - Example Comparisons

| Partition key value                                                                                            | Cardinality/Uniformity |
|----------------------------------------------------------------------------------------------------------------|------------------------|
| User ID, where the application has many users.                                                                 | High                   |
| Status code, where there are only a few possible status codes.                                                 | Low                    |
| Item creation date, rounded to the nearest time period (for example, day, hour, or minute).                    | Low                    |
| Device ID, where each device accesses data at relatively similar intervals.                                    | High                   |
| Device ID, where even if there are many devices being tracked, one is by far more popular than all the others. | Low                    |

# Examples

| Table Name | Type                  | Partition key                    | Sort Key   |
|------------|-----------------------|----------------------------------|------------|
| orders     | Composite Primary Key | customerid#productid#countrycode | order_date |
