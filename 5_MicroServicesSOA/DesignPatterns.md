# Microservices - Design Patterns

|                                                 | Type                          | Remarks                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|-------------------------------------------------|-------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| :star: Database per service                     | Data management               | Each service has its [own private database](https://microservices.io/patterns/data/database-per-service.html).<br/>- It is easier to scale and fast development with a [denormalized schema (NoSQL or SQL with simple queries)](../3_DatabaseServices) because each service stores and processes data related to a single business function.                                                                                                         |
| :star: Local cache using Redis                  | Data management               | Microservices can cache the data locally in [Redis](../3_DatabaseServices/8_InMemory-Databases/Redis), instead of requesting data from another service everytime.                                                                                                                                                                                                                                                                                    |
| Domain Driven Design                            |                               | [Read more](../ArchitecturePatterns/DomainDrivenArchitecture.md)                                                                                                                                                                                                                                                                                                                                                                                     |
| Saga                                            | Data management - Consistency | A [saga](https://microservices.io/patterns/data/saga.html) is a sequence of local transactions. <br/>- Each local transaction updates the database and publishes a message or event to trigger the next local transaction in the saga.<br/>- If a local transaction fails because it violates a business rule then the saga executes a series of compensating transactions that undo the changes that were made by the preceding local transactions. |
| Command Query Responsibility Segregation (CQRS) | Data management               | [CQRS](../4_MessageBrokersEDA/EventDrivenArchitecture/CQRS.md) define a view database, which is a read-only replica that is designed to support that query. <br/>- The application keeps the replica up to data by subscribing to Domain events (through [Message Brokers like Kafka](../4_MessageBrokersEDA/Readme.md)) published by the service that own the data.                                                                                 |
| Event sourcing                                  | Data management               | [Event sourcing](../4_MessageBrokersEDA/EventDrivenArchitecture/EventSourcing.md) persists the state of a business entity such an Order or a Customer as a sequence of state-changing events. <br/>- Whenever the state of a business entity changes, a new event is appended to the list of events.                                                                                                                                                 |
| Asynchronous Messaging                          | Communication - Style         | Use asynchronous messaging for inter-service communication, using [Message Brokers](../4_MessageBrokersEDA) to pass events b/w microservices. <br/>- Services communicating by exchanging messages over messaging channels.<br/>- [Read more](https://microservices.io/patterns/communication-style/messaging.html)                                                                                                                                  |
| Circuit Breaker                                 | Reliability                   | Using [circuit breaker](../ArchitecturePatterns/CircuitBreaker.md), a remote service is invoked via a proxy that fails immediately when the failure rate of the remote call exceeds a threshold.                                                                                                                                                                                                                                                     |
| Request/Reply-based protocol                    | Communication - Style         | Use [gRPC](../8_APIProtocols/gRPC.md) or [REST](../8_APIProtocols/REST.md) for inter-service communication.<br/>- The client uses a request/reply-based protocol to make requests to a service.                                                                                                                                                                                                                                                      |
| API Gateway                                     | Communication - External API  | [API gateway](1_APIGateway/Readme.md) provides each client with unified interface to services.<br/>- Example - [AWS API Gateway](../2_AWSServices/1_NetworkingAndContentDelivery/2_ApplicationNetworking/AmazonAPIGateway/Readme.md), [Zulu](1_APIGateway/ZuluAPIGateway.md) etc. <br/>- [Read more](https://microservices.io/patterns/apigateway.html)                                                                                              |
| Service Registry & discovery                    | Communication                 | The router queries a [service registry](2_ServiceRegistry&Discovery/Readme.md) (a database of service instance locations) to discover the locations of service instances.<br/>- [Read more](https://microservices.io/patterns/server-side-discovery.html)                                                                                                                                                                                            |
| Logging & monitoring                            | Observability                 | Using [New Relic](../12_ObservabilityLogsServices/NewRelic/Readme.md), AWS Cloudwatch, [ELK](../12_ObservabilityLogsServices/ELK.md) etc.<br/>- [Read more](https://microservices.io/patterns/observability/application-logging.html)                                                                                                                                                                                                                |
| Distributed Tracing                             | Observability                 | [New Relic](../12_ObservabilityLogsServices/NewRelic/Readme.md), [AWS AppMesh](../2_AWSServices/1_NetworkingAndContentDelivery/2_ApplicationNetworking/AWSAppMesh.md) can be used as [service mesh](3_ServiceMesh.md) for distributed tracing.                                                                                                                                                                                                       |
| Service instance per container                  | Deployment patterns           | Use [Container orchestration service](../9_Container&OrchestrationServices/Readme.md) for container deployments.<br/>- [Kubernates](../9_Container&OrchestrationServices/Kubernates/Readme.md), [Amazon EKS](../2_AWSServices/4_ContainerOrchestrationServices/AmazonEKS.md), [AWS ECS](../2_AWSServices/4_ContainerOrchestrationServices/AmazonECS/Readme.md) etc.                                                                                  |
| Session                                         | Security                      | [Redis](../3_DatabaseServices/8_InMemory-Databases/Redis) can be used to share the session data between microservices.                                                                                                                                                                                                                                                                                                                               |
| Access token                                    | Security                      | The [API Gateway](1_APIGateway/Readme.md) authenticates the request and passes an access token (e.g. JSON Web Token) that securely identifies the requestor in each request to the services. <br/>- A service can include the access token in requests it makes to other services.                                                                                                                                                                   |

[Read more](https://microservices.io/patterns/)