# Amazon DynamoDB
- [DynamoDB](https://aws.amazon.com/dynamodb/) is a fully managed [NoSQL](../../../3_DatabaseServices/10_Document-Databases/) database service.
- It is a [key-value & document DB](../../../3_DatabaseServices/10_Document-Databases/) service, for fast lookup using primary key.
- Every record in a DynamoDB database can be considered as a map of attributes and values with a primary key to retrieve the record.
- All data items are stored on [Solid State Drives (SSDs)](../../../11_FileStorageServicesHDFS/StorageOptions.md), and are replicated across [3 Availability Zones](../../AWS-Global-Architecture-Region-AZ.md) for [high availability](../../../7_PropertiesDistributedSystem/Reliability/HighAvailability.md) and [durability](../../../3_DatabaseServices/1_ACIDTransactions/Durability.md). 
- With DynamoDB, you can offload the administrative burden of operating and scaling a highly available distributed database cluster, while paying a low price for only what you use.

# :star: Real world use cases of DynamoDB

| Use Case                                                                                                 | Remarks                                                                                                                                       |
|----------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| [Grab - Order processing/OLTP](../../../1_TechStacks/Grab/OrdersProcessing.md)                           | DynamoDB used as OLTP system for orders processing (with 3 months TTL).                                                                       |
| [Dropbox - Metadata store](../../../1_TechStacks/Dropbox/DropboxMetaDataStore.md)                        | DynamoDB used as OLTP/hot-storage system, for metadata ingestion.                                                                             |
| [Image URLs & Metadata](../../../0_HLDUseCasesProblems/AWS_DesignUploadImageLambdaS3/Readme.md)          |                                                                                                                                               |
| [Amazon Kinesis - Config Store](../../5_MessageBrokerServices/AmazonKinesis/AmazonKinesisDataStreams.md) |                                                                                                                                               |
| [Amplitude - Metadata Store](../../../1_TechStacks/Amplitude/Readme.md)                                  |                                                                                                                                               |
| [NGM - Mcafee](https://aws.amazon.com/solutions/case-studies/mcafee-dynamodb-case-study/)                | DynamoDB used as a reliable system to deliver tailored marketing campaign messages to its growing subscriber base of millions of subscribers. |

# Bookstore app on AWS

![](../../../0_HLDUseCasesProblems/AWS_BookStoreSampleApp/AWS-Bookstore-Demo-App.png)

[Read more](../../../0_HLDUseCasesProblems/AWS_BookStoreSampleApp/Readme.md)

# Key Features

| Feature                                                                                                                                                                             | Description                                                                                                                                                                                                                                                                                                                                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| :star: Tables                                                                                                                                                                       | Similar to other database systems, DynamoDB stores data in tables. A table is a collection of data.                                                                                                                                                                                                                                                                                                |
| :star: Items                                                                                                                                                                        | Each table contains zero or more items. <br/>- An item is a group of attributes that is uniquely identifiable among all the other items. <br/>- Items in DynamoDB are similar in many ways to rows, records, or tuples in other database systems.                                                                                                                                                  |
| :star: Attributes                                                                                                                                                                   | Each item is composed of one or more attributes. <br/>- An attribute is a fundamental data element, something that does not need to be broken down any further.<br/>- Attributes in DynamoDB are similar in many ways to fields or columns in other database systems.                                                                                                                              |
| :star: [Partitions and data distribution](Partioning.md)                                                                                                                            | When you create a table, in addition to the table name, you must specify the primary key of the table. <br/>- The primary key uniquely identifies each item in the table so that no two items can have the same key.<br/>- DynamoDB supports two kinds of primary keys: a [partition key](Partioning.md) and a [partition key plus sort key](Partioning.md).                                       |
| :star: [Secondary Indexes](SecondaryIndexes.md)                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                    |
| [Quotas & Limits](Quotas&Limits.md)                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                    |
| [Read Consistency Models](ReadConsistency.md)                                                                                                                                       | Eventual Consistency Model & Strong Consistency Model.                                                                                                                                                                                                                                                                                                                                             |
| Streams                                                                                                                                                                             | [DynamoDB Streams](Streams.md) is an optional feature that captures data modification events in DynamoDB tables. <br/>- The data about these events appear in the stream in near real time, and in the order that the events occurred.                                                                                                                                                             |
| ACID transactions (with limitations)                                                                                                                                                | DynamoDB supports [ACID (Atomicity, Consistency, Isolation, and Durability) transactions](Transactions.md) to enable you to build business-critical applications at scale.                                                                                                                                                                                                                         |
| [Capacity Modes - OnDemand, Provisioned Throughput](CapacityModes.md)                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                    |
| [DynamoDB Accelerator (DAX)](DAX.md)                                                                                                                                        | You can use [Amazon DynamoDB Accelerator (DAX)](DAX.md), which is an in-memory store for DynamoDB, without the need to modify application logic.                                                                                                                                                                                                                                           |
| [Fault tolerant](../../../7_PropertiesDistributedSystem/Reliability/FaultTolerance.md) & [Highly Available](../../../7_PropertiesDistributedSystem/Reliability/HighAvailability.md) | Data replicated across 3 Availability Zones.<br/>- Writes are acknowledged only when its done on 2 copies (AZs) of the partition.                                                                                                                                                                                                                                                                  |
| [Global tables](GlobalTables.md)                                                                                                                                                    | Build global applications with fast access to local data by easily replicating tables across multiple AWS Regions.                                                                                                                                                                                                                                                                                 |
| [Time to Live (TTL) supported](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/TTL.html)                                                                           | Based on the attribute, the record can be configured to expire in DynamoDB.                                                                                                                                                                                                                                                                                                                        |
| [Security - IAM](../../2a_IdentityServices/AWSIAM/Readme.md)                                                                                                                        | DynamoDB fully integrates with [AWS Identity and Access Management (AWS IAM)](../../2a_IdentityServices/AWSIAM/Readme.md) for robust security.                                                                                                                                                                                                                                                     |
| [Encryption at rest](https://docs.aws.amazon.com/kms/latest/developerguide/services-dynamodb.html)                                                                                  | By default, all tables are encrypted under an [AWS owned customer master key (CMK)](https://docs.aws.amazon.com/kms/latest/developerguide/services-dynamodb.html) in the DynamoDB service account.<br/>- However, you cannot view, use, track, or audit them.                                                                                                                                      |
| [Point-in-time recovery (PITR)](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/PointInTimeRecovery_Howitworks.html)                                               | Amazon DynamoDB enables you to back up your table data continuously by using [point-in-time recovery (PITR)](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/PointInTimeRecovery_Howitworks.html). <br/>- When you enable PITR, DynamoDB backs up your table data automatically with per-second granularity so that you can restore to any given second in the preceding 35 days. |
| Monitoring using Cloudwatch                                                                                                                                                         | Integrated with [Cloudwatch](../../8_ObservabilityLogsServices/AmazonCloudWatch/Readme.md)                                                                                                                                                                                                                                                                                                         |
| Logging DynamoDB operations using [CloudTrail](../../8_ObservabilityLogsServices/AWSCloudTrail.md))                                                                                 | DynamoDB is integrated with [CloudTrail](../../8_ObservabilityLogsServices/AWSCloudTrail.md), a service that provides a record of actions taken by a user, role, or an AWS service in DynamoDB. <br/>- CloudTrail captures all API calls for DynamoDB as events. <br/>- The calls captured include calls from the DynamoDB console and code calls to the DynamoDB API operations.                  |
| [PartiQL - a SQL-compatible query language for Amazon DynamoDB](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/ql-reference.html)                                 |                                                                                                                                                                                                                                                                                                                                                                                                    |

# History of DynamoDB
> [How Amazon’s DynamoDB helped reinvent databases?](https://www.networkworld.com/article/2932313/how-amazon-s-dynamodb-helped-reinvent-databases.html)
> Amazon DynamoDB is built on the principles of [Dynamo](../../../3_DatabaseServices/5_DataStructuresUsedInDB/DynamoStyleDatabases.md) and is a hosted service within the AWS infrastructure.
> However, while [Dynamo](../../../3_DatabaseServices/5_DataStructuresUsedInDB/DynamoStyleDatabases.md) is based on [leaderless replication](../../../3_DatabaseServices/4_Consistency&Replication/Replication.md), DynamoDB uses [single-leader replication](../../../3_DatabaseServices/4_Consistency&Replication/Replication.md).

# Data types supported in DynamoDB

| Data Type   | Description                                                                                         |
|-------------|-----------------------------------------------------------------------------------------------------|
| Scalar      | These types represent a single value, and include number, string, binary, Boolean, and null.        |
| Document    | These types represent a complex structure possessing nested attributes, and include lists and maps. |
| Set         | These types represent multiple scalars, and include string sets, number sets, and binary sets.      |

# AWS CLI commands

| Operation                                                                                                           | Command                                                                                         | Description                                                                                                                                                                                        |
|---------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [List tables](https://awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/list-tables.html)         | aws dynamodb list-tables                                                                        | First, use the list-tables command to discover what tables are defined in your AWS Region.                                                                                                         |
| [Describe table](https://awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/describe-table.html)   | aws dynamodb describe-table --table-name Music                                                  | Use one of the table names from the previous command to get more information about that table.                                                                                                     |
| [Get item](https://awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/get-item.html)               | aws dynamodb get-item --table-name Music --key file://key.json --return-consumed-capacity TOTAL | The get-item command returns a set of attributes for the item with the given primary key.<br/>- In this example, a file called key.json is used to provide partition and sort keys.                |
| [Describe Limits](https://awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/describe-limits.html) | aws dynamodb describe-limits                                                                    | The describe-limits command returns the current provisioned-capacity quotas for your AWS account in a Region, both for the Region as a whole and for any one DynamoDB table that you create there. |

# :thumbsdown: What are disadvantages of DynamoDB?
- Deployable only on AWS and cannot be installed on individual desktops/servers
- No server side scripts
- General disadvantages of NoSQL
  - Querying data is extremely limited
  - Table Joins are impossible
  - No triggers
  - No foreign key concept to refer to other table items

# References
- :star: [What I’ve Learned From Using AWS DynamoDB in Production for More Than 3 Years?](https://medium.com/aws-tip/what-ive-learned-from-using-aws-dynamodb-in-production-for-more-than-3-years-49a077886b5c)
- [DynamoDB, Ten Years Later](https://www.mydistributed.systems/2022/10/dynamodb-ten-years-later.html)
- [AWS re:Invent 2019: Data modeling with Amazon DynamoDB](https://www.youtube.com/watch?v=DIQVJqiSUkE)
- [Streaming Amazon DynamoDB data into a centralized data lake](https://aws.amazon.com/blogs/big-data/streaming-amazon-dynamodb-data-into-a-centralized-data-lake/)
- [Should Your DynamoDB Table Be Normalized or Denormalized?](https://aws.amazon.com/blogs/database/should-your-dynamodb-table-be-normalized-or-denormalized/)
- [Service, account, and table quotas in Amazon DynamoDB](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/ServiceQuotas.html)
- [How to determine if Amazon DynamoDB is appropriate for your needs, and then plan your migration?](https://aws.amazon.com/blogs/database/how-to-determine-if-amazon-dynamodb-is-appropriate-for-your-needs-and-then-plan-your-migration/)
- [DynamoDB Guide](https://www.dynamodbguide.com/what-is-dynamo-db)
- [AWS re:Invent 2023 - Data modeling core concepts for Amazon DynamoDB](https://www.youtube.com/watch?v=l-Urbf4BaWg)