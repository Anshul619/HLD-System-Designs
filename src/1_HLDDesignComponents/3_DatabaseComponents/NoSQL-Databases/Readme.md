# NoSQL-DB types

![img.png](assets/NoSQL-DifferentDBtypes.drawio.png)

|                      | :star: Key-Value Databases                                                                                                                                                                                                                                       | Document Databases                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Wide-Column Databases                                                                                                                                                                                                                         | Graph Databases                                                                                                                                                                                                                                                               | Time-Series DB                                                                                                                                            | In-Memory                                                                                                                                                                                                                                                                                                | Ledger                                                                                                                              |
|----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------|
| Key Strength         | High throughput/low latency reads/writes, endless scale                                                                                                                                                                                                          | Mobile, content management, personalization etc.                                                                                                                                                                                                                                                                                                                                                                                                                      | High number of writes, low reads etc.                                                                                                                                                                                                         | Easily create and navigate relationship between data                                                                                                                                                                                                                          | Collect, store and process data sequenced by time                                                                                                         | Query by key with microsecond latency                                                                                                                                                                                                                                                                    | Collect, Immutable and verifiable history of changes to app data                                                                    |
| Use Case             | High-traffic web apps<br/>- Shopping Cart<br/>- Product catalogs<br/>- Gaming applications<br/>- Advertising tech etc.                                                                                                                                           | Content management, catalogs, user profiles, Mobile Games, IOT etc.                                                                                                                                                                                                                                                                                                                                                                                                   | High-scale industrial apps for equipment maintenance<br/>- Fleet management<br/>- Route optimization<br/>- [Time Series Data](https://netflixtechblog.com/scaling-time-series-data-storage-part-i-ec2b6d44ba39)<br/>- Historical records etc. | [User Activity Relationship](../../../3_HLDDesignProblems/InstagramDesign/Readme.md)<br/>- Fraud detection<br/>- Social networking<br/>- Recommendation engines<br/>- Logistics & spatial data<br/>- Identity and access management etc.                                      | Home screen feed<br/>- Operations monitoring<br/>- Application metrics<br/>- Internet of Things sensor data<br/>- Real-time analytics, Event tracing etc. | Caching<br/>- Session management<br/>- Gaming leaderboards<br/>- Geospatial applications etc.                                                                                                                                                                                                            | Systems of record<br/>- Supply chain<br/>- Registrations<br/>- Banking transactions etc.                                            |
| Open Source Services | [RocksDB](RocksDB.md)                                                                                                                                                                                                                                            | [MongoDB](MongoDB), [Elastic Search](../Search-Indexes/ElasticSearch), [CouchDB](https://couchdb.apache.org) etc.                                                                                                                                                                                                                                                                                                                                                     | [Apache Casandra](ApacheCasandra.md)<br/>- [Apache HBase](ApacheHBase.md)                                                                                                                                                                     | [Neo4j](Neo4j.md)<br/>- [Redis Graph](../In-Memory-Cache/Redis/RedisGraph.md)                                                                                                                                                                                                 | [InfluxDB](https://en.wikipedia.org/wiki/InfluxDB)                                                                                                        | -                                                                                                                                                                                                                                                                                                        | [Redis](../In-Memory-Cache/Redis)                                                                                                   |
| AWS Services         | [Amazon DynamoDB](../../../2_AWSComponents/6_DatabaseServices/AmazonDynamoDB/Readme.md)                                                                                                                                                                          | [Amazon DocumentDB (with MongoDB compatibility)](../../../2_AWSComponents/6_DatabaseServices/Readme.md)                                                                                                                                                                                                                                                                                                                                                               | [Amazon Keyspaces (for Apache Cassandra)](../../../2_AWSComponents/6_DatabaseServices/AmazonKeySpaces.md)                                                                                                                                     | [Amazon Neptune](https://aws.amazon.com/neptune/)                                                                                                                                                                                                                             | [Amazon Timestream](https://aws.amazon.com/timestream/)                                                                                                   | [Amazon Elastic Cache](../../../2_AWSComponents/6_DatabaseServices/AmazonElasticCache.md)                                                                                                                                                                                                                | [Amazon Quantum Ledger Database (QLDB)](https://aws.amazon.com/qldb/)                                                               |
| Strength             | Very flexible<br/>- Able to handle a wide variety of data types<br/>- Keys are linked directly to their values with no need for indexing or complex join operations<br/>- Content of a key can easily be copied to other systems without reprogramming the data. | In these databases, data is stored in [JSON-like documents](https://aws.amazon.com/nosql/document/) (instead of rows and columns in a table) and these documents are grouped together in collections.<br/>- Each document can have an entirely different structure.<br/>- Since JSON document can contain all relevant information at one place (i.e. its self-contained), hence one query would be sufficient to get the data (instead of doing table joins in SQL). | -                                                                                                                                                                                                                                             | Allow simple, fast retrieval of complex hierarchical structures<br/>- Great for real-time big data mining<br/>- Can rapidly identify common data points between nodes<br/>- Great for making relevant recommendations and allowing for rapid querying of those relationships. | -                                                                                                                                                         | Support the most demanding applications requiring sub-millisecond response times<br/>- Great for caching, gaming, and session store<br/>- Adapt to changes in demands by scaling out and in without downtime<br/>- Provide ultrafast (sub-microsecond latency) and inexpensive access to copies of data. | Data that is rapidly changing or is seldom accessed<br/>- Application using the in-memory store has a low tolerance for stale data. |                                                                                          |
| Weaknesses           | Analytical queries are difficult to perform due to the lack of joins<br/>- Access patterns need to be known in advance for optimum performance.                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | -                                                                                                                                                                                                                                             | Cannot adequately store transactional data<br/>- Analysts must learn new languages to query the data<br/>- Performing analytics on the data may not be as efficient as with other database types.                                                                             |                                                                                                                                                           |                                                                                                                                                                                                                                                                                                          |                                                                                                                                     |

# NoSQL-DB Comparisons

| Database                                                                                       | Strength                                                                                                                                                                                                    | DB Type        | Pricing Model |
|------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------|--------------|
| :star: [Amazon DynamoDB](../../../2_AWSComponents/6_DatabaseServices/AmazonDynamoDB/Readme.md) | Predictable performance and cost. <br/>- More than 20 million requests per second <br/>- Less than 10-20 ms latency                                                                                         | Key-Value-DB   | AWS Managed Service |
| :star: [Elastic Search](../Search-Indexes/ElasticSearch)                                       | Full-Text-Search, Logs-Analysis (ELK), Metrics, Analysis                                                                                                                                                    | Document-DB    | Open Source  |
| [Apache Casandra](ApacheCasandra.md)                                                           | Handle large amount of data, at [low latency](../../0_SystemGlossaries/Scalability/LatencyThroughput.md) (with [eventual consistency](../../0_SystemGlossaries/Database/ReplicationAndDataConsistency.md))  | Wide-Column-DB | Open Source  |
| [Apache HBase](ApacheHBase.md)                                                                 | Handle large amount of data, at [normal latency](../../0_SystemGlossaries/Scalability/LatencyThroughput.md) (with [strong consistency](../../0_SystemGlossaries/Database/ReplicationAndDataConsistency.md)) | Wide-Column-DB | Open Source  |
| [RocksDB](RocksDB.md)                                                                          | [Low latency](../../0_SystemGlossaries/Scalability/LatencyThroughput.md), key-value data store for timeline use cases (like newsfeed).                                                                      | Document-DB    | Open Source  |
| [Casandra vs MongoDB](CasandraVsMongoDB.md)                                                    | -                                                                                                                                                                                                           | -              | -            |

# How to choose database in the system design?

![img.png](../assests/DecideDatabase.drawio.png)

[Read more](../DecideDatabase.md)

# Document DB

The following table compares terminology used by document databases with terminology used by relational databases.

| Relational          | Document          |
|---------------------|-------------------|
| Table               | Collection        |
| Row                 | Document          |
| Column              | Field             |
| Primary key         | Object ID         |
| Nested table/object | Embedded document |


## Book example - JSON-like document

````json
[
    {
        "year" : 2013,
        "title" : "Turn It Down, Or Else!",
        "info" : {
            "directors" : [ "Alice Smith", "Bob Jones"],
            "release_date" : "2013-01-18T00:00:00Z",
            "rating" : 6.2,
            "genres" : ["Comedy", "Drama"],
            "image_url" : "http://ia.media-imdb.com/images/N/O9ERWAU7FS797AJ7LU8HN09AMUP908RLlo5JF90EWR7LJKQ7@@._V1_SX400_.jpg",
            "plot" : "A rock band plays their music at high volumes, annoying the neighbors.",
            "actors" : ["David Matthewman", "Jonathan G. Neff"]
        }
    },
    {
        "year": 2015,
        "title": "The Big New Movie",
        "info": {
            "plot": "Nothing happens at all.",
            "rating": 0
        }
    }
]
````
