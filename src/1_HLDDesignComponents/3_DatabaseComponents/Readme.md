# SQL vs NoSQL

| Basis                                                                                  | SQL                                                                                                                                                                                                                                                                                                       | [NoSQL](NoSQL-Databases)                                                                                                                                                                                                                                                                                                                 |
|----------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Data Type                                                                              | Normalized, Structured Data, Referential integrity                                                                                                                                                                                                                                                        | Denormalized, Semi-structured, Unstructured data                                                                                                                                                                                                                                                                                         |
| Schema                                                                                 | :hammer: Fixed Schema (`schema-on-write`)                                                                                                                                                                                                                                                                 | Dynamic Schema (`schema-on-read`)<br/>(with hierarchical storage supported)                                                                                                                                                                                                                                                              |
| Write Performance                                                                      | Okay<br/>- Every write is not just an append to a table but also an update to multiple index which might require locking and hence might interfere with other reads and other writes.                                                                                                                     | :muscle: Very Good<br/>- Writes are cheaper due to [append-only nature](../0_SystemGlossaries/Database/AppendOnlyDataStructure.md)<br/>- Hence writes have [High-Throughput, Low-Latency](../0_SystemGlossaries/Scalability/LatencyThroughput.md)                                                                                        |
| Querying                                                                               | :muscle: Very Powerful                                                                                                                                                                                                                                                                                    | Okay                                                                                                                                                                                                                                                                                                                                     |
| Ideal Use Cases                                                                        | SQL is best suitable for complex queries, multi-row transactions, joins etc. <br/>- Data is structured ( like e-commerce, :moneybag: financial applications, traditional applications, ERP, CRM  etc.) and also when data reporting is needed.<br/>- OLTP business systems or OLAP.                       | NoSQL is best suited for unstructured data or documents (or large volume of data). <br/>- Not ideal for complex queries.<br/>- UCS like Gaming, Analytics, Online Tests etc.<br/>- OLTP web/mobile apps                                                                                                                                  |
| Scalability                                                                            | [Vertically Scalable](../0_SystemGlossaries/Scalability/DBScalability.md) (increase memory, CPU of machine) or <br/>- [Single-Master-Multi-Read-Replicas technique](../0_SystemGlossaries/Scalability/DBScalability.md) (1 write DB, multiple read DBs) or <br/>- Sharding based on a business parameter. | [Horizontally Scalable](../0_SystemGlossaries/Scalability/DBScalability.md) (through in-built data sharding technique)                                                                                                                                                                                                                   |
| Properties                                                                             | [SQL enables ACID (atomicity, consistency, isolation, and durability)](../0_SystemGlossaries/Database/ACIDPropertyTransaction.md) transaction properties.                                                                                                                                                 | [NoSQL follows CAP (consistency, availability, partition tolerance)](../0_SystemGlossaries/Database/CAPTheorem.md) properties of the distributed systems.                                                                                                                                                                                |
| [Consistency Pattern](../0_SystemGlossaries/Database/ReplicationAndDataConsistency.md) | Strongly Consistent                                                                                                                                                                                                                                                                                       | Eventually Consistent<br/>- Non-relational databases can be deployed on massively distributed commodity servers. <br/>- These databases have an advantage in scaling and can handle much larger data sets than relational databases. <br/>- The massive distribution and scale does come at a cost, in the form of eventual consistency. |
| Best Features                                                                          | Secure, Cross Platform Support, Free                                                                                                                                                                                                                                                                      | High Performance, Flexible, Easy to use                                                                                                                                                                                                                                                                                                  |
| Built-in Single Machine Failure                                                        | :x: Not-Supported                                                                                                                                                                                                                                                                                         | :white_check_mark: Supported                                                                                                                                                                                                                                                                                                             |
| Optimization                                                                           | Optimized for storage                                                                                                                                                                                                                                                                                     | Optimized for compute                                                                                                                                                                                                                                                                                                                    |

# How to choose database in the system design?

![img.png](assests/DecideDatabase.drawio.png)

[Read more](DecideDatabase.md)

# SQL - Intro

![img.png](assests/SQLDifferentTypes.png)

Relational databases store data in rows and columns.
- Each row contains all the information about one entity and each column contains all the separate data points.
- Some of the most popular relational databases are [AWS Aurora](../../2_AWSComponents/6_DatabaseServices/AmazonRDS/AmazonAurora/Readme.md), `Postgres`, `MySQL`, `Oracle`, `MS SQL Server` etc.
- [Read more about sharding in MySQL Cluster](https://www.mysql.com/products/cluster/scalability.html)
- Columns that you are querying (SELECT, GROUP BY, ORDER BY, JOIN) could be faster with [indices](../0_SystemGlossaries/Database/Indexing.md).

# NoSQL - Intro, Different NoSQL types

![img.png](NoSQL-Databases/assets/NoSQL-DifferentDBtypes.drawio.png)

[Read more](NoSQL-Databases/Readme.md)

# SQL - Different Databases

| Feature           | PostgreSQL                                                                                                                                                                        | MySQL                                                                   |
|-------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|
| Speed             | [PostgreSQL is twice as fast as MySQL](https://itnext.io/benchmark-databases-in-docker-mysql-postgresql-sql-server-7b129368eed7)                                                  | -                                                                       |
| Security          | -                                                                                                                                                                                 | A lot of security features are built in MySQL, and it is highly secure. |
| Robustness        | In general, PostgreSQL is a more robust, advanced database management system, well-suited for an organization that needs to perform complex queries in a large environment quickly. | -                                                                       |
| Querying          | In general, PostgreSQL is best suited for systems that require execution of complex queries, or data warehousing and data analysis or complex procedures.                         | -                                                                       |
| Write Query Speed | Faster                                                                                                                                                                            | -                                                                       |

[Read more](ttps://www.ibm.com/cloud/blog/postgresql-vs-mysql-whats-the-difference)

# Relational Database Types

| Type                                                                                                | Description                                                                                                                                                                                                                                                                                                                                                                | Example                         |
|-----------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
| [Online transaction processing (OLTP)](https://en.wikipedia.org/wiki/Online_transaction_processing) | Online transaction processing (OLTP) databases focus on recording Update, Insertion, and Deletion data transactions.<br/>- OLTP queries are simple and short, which requires less time and space to process.<br/>- A great example of an OLTP system is a bank ATM, in which you can modify your bank account using short transactions.                                    | Amazon Aurora                   |
| [Online analytical processing (OLAP)](https://en.wikipedia.org/wiki/Online_analytical_processing)   | Online analytical processing (OLAP) databases store historical data that has been input by OLTP. <br/>- OLAP databases allow users to view different summaries of multidimensional data. <br/>- Using OLAP, you can extract information from a large database and analyze it for decision-making. <br/>- A good example of an OLAP system is a business intelligence tool. | Data-warehouse, Amazon Redshift |

# References
- [Groking the System Design](https://www.educative.io/courses/grokking-the-system-design-interview/YQlK1mDPgpK)
- [SQL vs NoSQL](https://www.interviewbit.com/blog/sql-vs-nosql/)
- [Scaling Your Amazon RDS Instance Vertically and Horizontally](https://aws.amazon.com/blogs/database/scaling-your-amazon-rds-instance-vertically-and-horizontally/)
- [10 use cases where NoSQL will outperform SQL](https://www.networkworld.com/article/2999856/10-use-cases-where-nosql-will-outperform-sql.html)
- [Why is NoSQL faster than SQL?](https://softwareengineering.stackexchange.com/questions/175542/why-is-nosql-faster-than-sql)
- [Why and How to Migrate from Apache Cassandra to Amazon DynamoDB - AWS Online Tech Talks?](https://www.youtube.com/watch?v=WuDGvG_4kC8)
- [7 Database Paradigms](https://www.youtube.com/watch?v=G1rOthIU-uo)