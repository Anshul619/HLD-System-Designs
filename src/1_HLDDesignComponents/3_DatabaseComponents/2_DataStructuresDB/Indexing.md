# Indexing
- An [index](https://www.geeksforgeeks.org/indexing-in-databases-set-1/) is a data structure that is used to find and access data available in a table of a database faster.
- Indexes are aggressively cached into memory, hence helps in improving READ queries performance.

# Types of Indexes

| Type                                                                                                          | Supported DBs                                                                                                                     | Description                                                                                                                                                                           | Examples                                                                                                                 |
|---------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| [Primary Index](https://pediaa.com/what-is-the-difference-between-primary-and-secondary-index/)               | All Data-stores                                                                                                                   | Primary index is an index on a set of fields that includes the primary key and does not contain duplicates.                                                                           | Find a user with user123 id                                                                                              |
| [Secondary Index](https://pediaa.com/what-is-the-difference-between-primary-and-secondary-index/)             | Bread & Butter of SQL Databases.<br/>- Common in document databases<br/>- Not implemented in wide-column databases like Casandra. | Secondary index is an index that is not a primary index and can contain duplicates.                                                                                                   | Find all actions by user123 <br/>- Find all articles containing the word hogwash<br/>- Find all cars whose color is red. |
| [Full-Text Index](https://www.mongodb.com/basics/full-text-search)                                            | Reason of existence for Search dbs like ElasticSearch etc.                                                                        | Full-text search refers to searching some text inside extensive text data stored electronically and returning results that contain some or all of the words from the query.           |                                                                                                                          |
| [Range Index](https://docs.pinot.apache.org/basics/indexing/range-index)                                      | ElasticSearch                                                                                                                     | Range indexing allows you to get better performance for queries that involve filtering over a range.                                                                                  |                                                                                                                          |
| [Spatial Index](https://stackoverflow.com/questions/2256364/what-is-a-spatial-index-and-when-should-i-use-it) | ElasticSearch                                                                                                                     | You can use a spatial index for indexing geo-objects - shapes. The spatial index makes it possible to efficiently search for objects that overlap in space.                           |                                                                                                                          |
| [Multikey Indexes](https://www.mongodb.com/docs/manual/core/index-multikey/)                                  | MongoDB                                                                                                                           | To index a field that holds an array value, MongoDB creates an index key for each element in the array. <br/>- These multikey indexes support efficient queries against array fields. |                                                                                                                          |
| [Compound Indexes](https://www.mongodb.com/docs/manual/core/index-compound/)                                  | MongoDB, SQL etc.                                                                                                                 | MongoDB supports compound indexes, where a single index structure holds references to multiple fields within a collection's documents.                                                |                                                                                                                          |

[Read more](https://pediaa.com/what-is-the-difference-between-primary-and-secondary-index/)

# :+1: Advantages of Indexes

| Title                                | Remarks                                                                                                                                                                                                  |
|--------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| O(1) query time, instead of O(n)     | Indexes are used to speed up lookups (log-time instead of scanning the entire table) and to keep the data in memory. <br/>- This increases performance of queries.                                       |
| Represented as self-balancing B-tree | Indices are usually represented as [self-balancing B-tree](../2_DataStructuresDB/BTree.md) that keeps data sorted and allows searches, sequential access, insertions, and deletions in logarithmic time. | 

[Read more](https://github.com/donnemartin/system-design-primer#use-good-indices)

# :-1: Disadvantages of Indexes

| Title                                          | Remarks                                                                                                               |
|------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------|
| Increased in-memory space                      | Placing an index can keep the data in memory, requiring more space.                                                   |
| Slow Writes                                    | Writes could be slower since the index also needs to be updated. Hence, we should create only required indexes.       |
| Drop indices before loading big-data           | When loading large amounts of data, it might be faster to disable indices, load the data, then rebuild the indices.   |
| Incorrect compound indexes can be inconsistent | [Swiggy - BehindTheBug â€” Indexing Gone Wrong](https://bytes.swiggy.com/behindthebug-indexing-gone-wrong-6b4d682fd805) |

[Read more](https://github.com/donnemartin/system-design-primer#use-good-indices)

# Types of Secondary Indexes, in case of Partitioning/Sharding

| Type                   | Description                                                                                                                                                                                                                                                                             | Consistency                                                                                                                                                                                                                         | Examples                                                                                                        |
|------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------|
| Local Secondary Index  | A local secondary index is "local" in the sense that every partition of a local secondary index is scoped to a base table partition that has the same partition key value.                                                                                                              | Eventual consistency only<br/>- [Amazon DynamoDB](../../../2_AWSComponents/6_DatabaseServices/AmazonDynamoDB/Readme.md) states that its global secondary indexes are updated within a fraction of a second in normal circumstances. | [Amazon DynamoDB](../../../2_AWSComponents/6_DatabaseServices/AmazonDynamoDB/Readme.md), MongoDB, Casandra etc. |
| Global Secondary Index | A global secondary index is considered "global" because queries on the index can span all of the data in the base table, across all partitions.<br/>- A global secondary index is stored in its own partition space away from the base table and scales separately from the base table. | Can choose either eventual consistency or strong consistency.                                                                                                                                                                       | [Amazon DynamoDB](../../../2_AWSComponents/6_DatabaseServices/AmazonDynamoDB/Readme.md), MongoDB etc.           |

[Read more](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/SecondaryIndexes.html)

# References
- [Tuning Input/Output (I/O) Operations for PostgreSQL](https://severalnines.com/blog/tuning-io-operations-postgresql/)