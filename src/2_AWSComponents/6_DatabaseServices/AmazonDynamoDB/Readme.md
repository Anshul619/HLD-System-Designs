# Amazon DynamoDB
- [DynamoDB](https://aws.amazon.com/dynamodb/) is a fully managed [NoSQL](../../../1_HLDDesignComponents/3_DatabaseComponents) database service
- It is a key-value & document DB service, for fast lookup using primary key.
- Every record in a DynamoDB database can be considered as a map of attributes and values with a primary key to retrieve the record.
- All data items are stored on [Solid State Drives (SSDs)](https://www.techtarget.com/searchstorage/definition/SSD-solid-state-drive), and are replicated across [3 Availability Zones](../../AWS-Global-Architecture-Region-AZ.md) for [high availability](../../../1_HLDDesignComponents/0_SystemGlossaries/Reliability/HighAvailability.md) and [durability](../../../1_HLDDesignComponents/0_SystemGlossaries/Database/Durability.md). 
- With DynamoDB, you can offload the administrative burden of operating and scaling a highly available distributed database cluster, while paying a low price for only what you use.

# :star: Real world use cases of DynamoDB
- [Twillo - Send Message API Design](../../../3_HLDDesignProblems/TwilloSendMessageAPI)

## IoT sensor data capture architecture
- Capturing data from thousands of Internet of Things (IoT) sensors can be a challenge. This architecture represents one solution to this challenge.

![](../../7_StorageServices/assets/AWS-IOT-Data-Capture.png)

# Key Features

| Feature                                                                                                                                                                                                  | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| :star: Tables                                                                                                                                                                                            | Similar to other database systems, DynamoDB stores data in tables. A table is a collection of data. <br/>- For instance, you could have a table called People that you could use to store personal contact information about friends, family, or anyone else of interest. <br/>- You could also have a Cars table to store information about vehicles that people drive.                                                                                                                                                                                                                                         |
| :star: Items                                                                                                                                                                                             | Each table contains zero or more items. <br/>- An item is a group of attributes that is uniquely identifiable among all the other items. <br/>- In a People table, each item represents a person. <br/>- In a Cars table, each item represents one vehicle. <br/>- Items in DynamoDB are similar in many ways to rows, records, or tuples in other database systems. <br/>- In DynamoDB, there is no limit to the number of items you can store in a table.                                                                                                                                                      |
| :star: Attributes                                                                                                                                                                                        | Each item is composed of one or more attributes. <br/>- An attribute is a fundamental data element, something that does not need to be broken down any further. <br/>- For example, an item in a People table might contain attributes called PersonID, LastName, FirstName, and so on. <br/>- In a Department table, an item might have attributes such as DepartmentID, Name, Manager, and so on.<br/>-  Attributes in DynamoDB are similar in many ways to fields or columns in other database systems.                                                                                                       |
| :star: [Primary Key - Partitions and data distribution](PartitionKeyAndSortKey.md)                                                                                                                       | When you create a table, in addition to the table name, you must specify the primary key of the table. <br/>- The primary key uniquely identifies each item in the table so that no two items can have the same key.<br/>- DynamoDB supports two kinds of primary keys: a [partition key](PartitionKeyAndSortKey.md) and a [partition key plus sort key](PartitionKeyAndSortKey.md).                                                                                                                                                                                                                             |
| :star: [Secondary Indexes](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GSI.html)                                                                                                    | You can create one or more secondary indexes on a table. <br/>- Using a secondary index, you can query the data in the table using an alternate key and also against the primary key.<br/>- Both local and global secondary indexes are supported in DynamoDB.<br/>- Global secondary indexes in DynamoDB are eventually consistent, and are not guaranteed to return correct results.<br/>- You can have up to 20 local or global secondary indexes.                                                                                                                                                            |
| [Amazon DynamoDB Streams](DynamoDBStreams.md)                                                                                                                                                            | DynamoDB Streams is an optional feature that captures data modification events in DynamoDB tables. <br/>- The data about these events appear in the stream in near real time, and in the order that the events occurred.                                                                                                                                                                                                                                                                                                                                                                                         |
| [Capacity Mode - OnDemand, Provisioned Throughput](../ScalingServerlessDB.md)                                                                                                                            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| [Provisioned Read Capacity Units](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/ProvisionedThroughput.html#ItemSizeCalculations.Reads)                                                | One read capacity unit (RCU) represents one strongly consistent read per second, or two eventually consistent reads per second, for an item up to 4 KB in size.                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| [Provisioned Write Capacity Units](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/ProvisionedThroughput.html#ItemSizeCalculations.Reads)                                               | One write capacity unit (WCU) represents one write per second for an item up to 1 KB in size.                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| :star: [DynamoDB Accelerator (DAX)](DynamoDBAccelerator.md)                                                                                                                                              | You can use Amazon DynamoDB Accelerator (DAX), which is an in-memory store for DynamoDB, without the need to modify application logic.                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [Fault tolerant](../../../1_HLDDesignComponents/0_SystemGlossaries/Reliability/FaultTolerance.md), [Highly Available](../../../1_HLDDesignComponents/0_SystemGlossaries/Reliability/HighAvailability.md) | Data replicated across Availability Zones                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Consistency Models                                                                                                                                                                                       | [Eventual Consistency Model](../../../1_HLDDesignComponents/0_SystemGlossaries/Database/ReplicationAndDataConsistency.md#consistency-patterns)<br/>- [Strong Consistency Model](../../../1_HLDDesignComponents/0_SystemGlossaries/Database/ReplicationAndDataConsistency.md#consistency-patterns)                                                                                                                                                                                                                                                                                                                |
| [DynamoDB Global tables](DynamoDBGlobalTables.md)                                                                                                                                                        | Build global applications with fast access to local data by easily replicating tables across multiple AWS Regions.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [PartiQL - a SQL-compatible query language for Amazon DynamoDB](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/ql-reference.html)                                                      | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| [Time to Live (TTL) supported for the data](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/TTL.html)                                                                                   | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| JSON Support                                                                                                                                                                                             | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Items size up to 400 KB                                                                                                                                                                                  | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Monitoring                                                                                                                                                                                               | Integrated with [Cloudwatch](../../8_MonitoringServices/AmazonCloudWatch.md)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Security                                                                                                                                                                                                 | DynamoDB encrypts all data by default and fully integrates with AWS Identity and Access Management (AWS IAM) for robust security.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Supports ACID transactions                                                                                                                                                                               | DynamoDB supports ACID (Atomicity, Consistency, Isolation, and Durability) transactions to enable you to build business-critical applications at scale.                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Amazon DynamoDB & Dynamo Systems                                                                                                                                                                         | Amazon DynamoDB is built on the principles of [Dynamo](../../../1_HLDDesignComponents/3_DatabaseComponents/NoSQL-Databases/DynamoStyleDatabases.md) and is a hosted service within the AWS infrastructure.<br/>- However, while [Dynamo](../../../1_HLDDesignComponents/3_DatabaseComponents/NoSQL-Databases/DynamoStyleDatabases.md) is based on [leaderless replication](../../../1_HLDDesignComponents/0_SystemGlossaries/Database/ReplicationAndDataConsistency.md), DynamoDB uses [single-leader replication](../../../1_HLDDesignComponents/0_SystemGlossaries/Database/ReplicationAndDataConsistency.md). |


# Data types supported in DynamoDB

DynamoDB supports a large set of data types for table attributes. 

| Data Type   | Description                                                                                         |
|-------------|-----------------------------------------------------------------------------------------------------|
| Scalar      | These types represent a single value, and include number, string, binary, Boolean, and null.        |
| Document    | These types represent a complex structure possessing nested attributes, and include lists and maps. |
| Set         | These types represent multiple scalars, and include string sets, number sets, and binary sets.      |

# AWS CLI commands

| Operation                                                                                                           | Command                                                                                         | Description                                                                                                                                                                                        |
|---------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [List tables](https://awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/list-tables.html)         | aws dynamodb list-tables                                                                        | First, use the list-tables command to discover what tables are defined in your AWS Region.                                                                                                         |
| [Describe table](https://awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/describe-table.html)   | aws dynamodb describe-table --table-name Music                                                  | Use one of the table names from the previous command to get more information about that table.                                                                                                     |
| [Get item](https://awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/get-item.html)               | aws dynamodb get-item --table-name Music --key file://key.json --return-consumed-capacity TOTAL | The get-item command returns a set of attributes for the item with the given primary key.<br/>- In this example, a file called key.json is used to provide partition and sort keys.                |
| [Describe Limits](https://awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/describe-limits.html) | aws dynamodb describe-limits                                                                    | The describe-limits command returns the current provisioned-capacity quotas for your AWS account in a Region, both for the Region as a whole and for any one DynamoDB table that you create there. |

# Logging DynamoDB operations using CloudTrail
DynamoDB is integrated with [CloudTrail](../../8_MonitoringServices/AWSCloudTrail.md), a service that provides a record of actions taken by a user, role, or an AWS service in DynamoDB. CloudTrail captures all API calls for DynamoDB as events. The calls captured include calls from the DynamoDB console and code calls to the DynamoDB API operations.
- If you create a trail, you can set up continuous delivery of [CloudTrail events](../../8_MonitoringServices/AWSCloudTrail.md) to an [S3 bucket](../../7_StorageServices/3_ObjectStorageTypes/AmazonS3/Readme.md), including events for DynamoDB. 
- If you don't configure a trail, you can still view the most recent events in the CloudTrail console in Event history. 

# :thumbsdown: What are disadvantages of DynamoDB?
- Deployable only on AWS and cannot be installed on individual desktops/servers
- No server side scripts
- General disadvantages of NoSQL
  - Querying data is extremely limited
  - Table Joins are impossible
  - No triggers
  - No foreign key concept to refer to other table items

# References
- [Top DynamoDB Interview Questions](https://www.javainuse.com/misc/dynamodb-interview-questions)
- [20 DynamoDB Interview Questions and Answers](https://climbtheladder.com/dynamodb-interview-questions/)
- [What I’ve Learned From Using AWS DynamoDB in Production for More Than 3 Years?](https://medium.com/aws-tip/what-ive-learned-from-using-aws-dynamodb-in-production-for-more-than-3-years-49a077886b5c)
- [Streaming Amazon DynamoDB data into a centralized data lake](https://aws.amazon.com/blogs/big-data/streaming-amazon-dynamodb-data-into-a-centralized-data-lake/)