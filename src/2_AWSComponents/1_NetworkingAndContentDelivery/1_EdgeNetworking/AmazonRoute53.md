
# Amazon Route 53
- [Amazon Route 53](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/Welcome.html) is a [highly available](../../../1_HLDDesignComponents/0_SystemGlossaries/Reliability/HighAvailability.md) and [scalable](../../../1_HLDDesignComponents/0_SystemGlossaries/Scalability/DBScalability.md) [Domain Name System (DNS)](https://www.cloudflare.com/learning/dns/what-is-dns/) web service. 
- Amazon Route 53 can transfer or manage only [second-level domains](https://developer.mozilla.org/en-US/docs/Glossary/Second-level_Domain).

![img.png](../../0_AWSDesigns/DesignMultiRegionActiveActiveArchitectureOnAWS/AWS-Multi-Region-AZ-HA.drawio.png)

# Features

| Feature                                                                                                                                                                              | Description                                                                                                                                                                                                                                      |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Domain registration                                                                                                                                                                  | -                                                                                                                                                                                                                                                |
| Domain hosting                                                                                                                                                                       | -                                                                                                                                                                                                                                                |
| DNS routing                                                                                                                                                                          | -                                                                                                                                                                                                                                                |
| [Resolver](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resolver.html)                                                                                                  | -                                                                                                                                                                                                                                                |
| Globally Distributed Servers                                                                                                                                                         | Amazon is a global service and consequently has DNS services globally. Any customer creating a query from any part of the world gets to reach a `DNS server local` to them that provides low latency.                                            |
| Optimal Locations                                                                                                                                                                    | [Route 53](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/Welcome.html) uses a [global anycast network](https://www.cloudflare.com/learning/cdn/glossary/anycast-network/) to answer queries from the optimal position automatically. |
| Dependency                                                                                                                                                                           | [Route 53](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/Welcome.html) provides a high level of dependability required by critical applications.                                                                                     |
| [Alias Records](https://repost.aws/knowledge-center/route-53-create-alias-records)                                                                                                   | -                                                                                                                                                                                                                                                |
| [End-point health checks](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/health-checks-types.html) let you monitor an endpoint using either an IP address or domain name. | -                                                                                                                                                                                                                                                |

# Routing Policy

| Policy                    | Description                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|---------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Simple policy             | Use a [simple routing policy](https://aws.amazon.com/premiumsupport/knowledge-center/multivalue-versus-simple-policies/) for traffic that requires only standard DNS records and that doesn't require special options such as weighted routing or latency routing.                                                                                                                                                                                      |
| Geo Based DNS routing     | The [Geo Based DNS routing](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-policy-geo.html) takes decisions based on the geographic location of the request.<br/>- Geo Based routing is used when you want to direct the customer to different websites based on the country or region they are browsing from.                                                                                                                       |
| Latency Based Routing     | Latency Based Routing utilizes [latency measurements between networks and AWS data centers](../../../1_HLDDesignComponents/0_SystemGlossaries/Scalability/LatencyThroughput.md). <br/>- Latency Based Routing is used when you want to give your customers the lowest latency possible.                                                                                                                                                                 |
| Multivalue answer routing | [Use a multivalue answer routing policy](https://aws.amazon.com/premiumsupport/knowledge-center/multivalue-versus-simple-policies/) to help distribute DNS responses across multiple resources. <br/>- [Amazon ECS](../../4_ContainerOrchestrationServices/AmazonECS/Readme.md) uses multivalue answer routing in the [service-discovery](../../../1_HLDDesignComponents/1_MicroServicesSOA/2_ServiceRegistry&Discovery/Readme.md), for load balancing. |
| Weighted routing policy   | Use when you want to configure [weighted routing i.e. send X% to one target, Y% to another target](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-values-weighted.html), for example [Canary Deployments](../../../1_HLDDesignComponents/0_SystemGlossaries/DevOps/CanaryDeployments.md).                                                                                                                               |
| Fail-over routing policy  | Use when you want to configure [active-passive fail over for disaster recovery](../../../1_HLDDesignComponents/0_SystemGlossaries/Reliability/HighAvailability.md#active-passive-policy).                                                                                                                                                                                                                                                               |

## :star: Multivalue answer routing

![img.png](../assets/route53-multi-value-routing.png)

# Hosted Zones

|                 | [Public hosted zone](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html)                                                                                                                                                                                                    | [Private hosted zone](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/hosted-zones-private.html)                                                                                                                                                                                                                                                                                                             |
|-----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Description     | A [public hosted zone](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html) is a container that holds information about how you want to route traffic on the internet for a specific domain, such as example.com, and its subdomains (acme.example.com, zenith.example.com). | A [private hosted zone](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/hosted-zones-private.html) is a container that holds information about how you want [Amazon Route 53]() to respond to DNS queries for a domain and its subdomains within [one or more VPCs](../3_NetworkFoundations/AmazonVPC/Readme.md) that you create with the [Amazon VPC service](../3_NetworkFoundations/AmazonVPC/Readme.md). |
| Traffic Sources | Globally/Publicly accessed                                                                                                                                                                                                                                                                                 | Only [Amazon VPC services](../3_NetworkFoundations/AmazonVPC/Readme.md)                                                                                                                                                                                                                                                                                                                                                |
| Main-UseCase    | Hosting a website/apis                                                                                                                                                                                                                                                                                     | [Split-view DNS](https://www.bogotobogo.com/DevOps/AWS/aws-Route53-DNS-Private-Hosted-Zone.php) - Maintain internal and external versions of the same website or application. <br/>- We can configure public and private hosted zones to return different internal and external IP addresses for the same domain name.                                                                                                 |
| Requirement     | -                                                                                                                                                                                                                                                                                                          | [Enable DNS hostnames and DNS resolution in VPC](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-dns.html)                                                                                                                                                                                                                                                                                                        |


# CName vs Alias Records

|                                                            | CNAME Record  | Alias Record                                              | Remarks                                                   |
|------------------------------------------------------------|---------------|-----------------------------------------------------------|-----------------------------------------------------------|
| [Zone Apex](https://cloudsoft.io/blog/aws-dns-domain-apex) | Not-Supported | Supported                                                 | Zone apex of the hosted zone, is the name of hosted zone. |
| Change Detection                                           | Not-Supported | Supported                                                 | -                                                         |
| TTL                                                        | Supported     | Not-Supported<br/>- TTL depends on resource it points to. | -                                                         |
| Pricing                                                    | Billed        | Not-Billed                                                | -                                                         |

Read more
- [Choosing between alias and non-alias records](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-choosing-alias-non-alias.html)
- [AWS Route 53 Alias vs CNAME](https://jayendrapatil.com/aws-route-53-alias-vs-cname/)

# References
- [How to implement the perfect failover strategy using Amazon Route53](https://medium.com/dazn-tech/how-to-implement-the-perfect-failover-strategy-using-amazon-route53-1cc4b19fa9c7)
- [A Case Study in Global Fault Isolation](https://aws.amazon.com/blogs/architecture/a-case-study-in-global-fault-isolation/) 
- [Amazon Route 53 : Private Hosted Zone](https://www.bogotobogo.com/DevOps/AWS/aws-Route53-DNS-Private-Hosted-Zone.php)