# Amazon API Gateway
- [Amazon API Gateway](https://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html) is an AWS service for creating, publishing, maintaining, monitoring, and securing [REST, HTTP, and WebSocket APIs](../../../../1_HLDDesignComponents/2_APITechOptions/REST.md) at any scale.
- [API Gateway](https://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html) allows you to [create your APIs programmatically by importing OpenAPI/Swagger specification](../../../../1_HLDDesignComponents/2_APITechOptions/API_Documentation/Swagger/OpenAPISpec.md), using either the AWS API or the AWS Management Console. 
- [API Gateway serves as a front door to any web application](https://aws.amazon.com/api-gateway/features/) running on [Amazon EC2](../../../3_ComputeServices/AmazonEC2), [Amazon ECS](../../../4_ContainerOrchestrationServices/AmazonECS), [AWS Lambda](../../../3_ComputeServices/AWSLambda/Readme.md), or in any on-premises environment. 
- [An API gateway](https://aws.amazon.com/premiumsupport/knowledge-center/api-gateway-cloudfront-distribution/) provides a single entry point for all API calls that come into an application, whether the app is hosted in an on-premises data center or on the cloud. 
- It accepts requests that come in remotely and returns the requested data.

![img.png](../../../0_AWSDesigns/DesignScalableSystemWithRDMS/assets/DesignScalableSystemWithRelationalDBOnAWS.drawio.png)

[Read more](../../../0_AWSDesigns/DesignScalableSystemWithRDMS/README.md)

# Key Features of Amazon API Gateway

![img.png](assets/AmazonAPIGateway_Features.drawio.png)

## Support for RESTful APIs and WebSocket APIs

| API feature                                                                                                                          | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |     |
|--------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----|
| Private integrations with AWS ELB & AWS Cloud Map                                                                                    | With API Gateway, you can route requests to private resources in [your VPC](../../3_NetworkFoundations/AmazonVPC/Readme.md).<br/>- Using HTTP APIs, you can build APIs for services behind [private ALBs, private NLBs](../ElasticLoadBalancer/Readme.md), and IP-based services registered in AWS Cloud Map, such as [ECS tasks](../../../4_ContainerOrchestrationServices/AmazonECS/Readme.md).                                                                                                                                                                                                                       |     |
| Resiliency                                                                                                                           | API Gateway helps you manage traffic to your backend systems by allowing you to set [throttling rules](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-request-throttling.html) based on the number of requests per second for each HTTP method in your APIs.<br/>- [AWS WAF](../../../2_SecurityAndIdentityServices/3_InfraProtectionServices/AWSWAF.md) can also be configured on [API Gateway](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-control-access-aws-waf.html) to protect the APIs (i.e. Rate Limiting, XSS Attack, SQL Injection etc.)           |     |
| AWS Authorization                                                                                                                    | To authorize and verify API requests to AWS services, [API Gateway]() can help you leverage signature version 4 for REST APIs and WebSocket APIs.<br/>- Using signature version 4 authentication, you can use [AWS Identity and Access Management (IAM)](../../../2_SecurityAndIdentityServices/1_IdentityServices/AWSIAM.md) and access policies to authorize access to your APIs and all your other AWS resources.- You can also use [AWS Lambda functions](../../../3_ComputeServices/AWSLambda/Readme.md) to verify and authorize bearer tokens such as JWT tokens or SAML assertions. |     |
| Caching of API response                                                                                                              | The [response of the APIs can be cached](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-caching.html) in the API Gateway.                                                                                                                                                                                                                                                                                                                                                                                                                                   |     |
| API Keys for Third-Party Developers                                                                                                  | If you’re using REST APIs, API Gateway helps you manage the ecosystem of third-party developers accessing your APIs.<br/>- You can create API keys on API Gateway, set fine-grained access permissions on each API key, and distribute them to third-party developers to access your APIs.<br/>- You can also define plans that set throttling and request quota limits for each individual API key.<br/>- The use of API keys is completely optional and must be enabled on a per-method level.                                                                                      |     |
| API Lifecycle Management                                                                                                             | If you're using REST APIs, API Gateway lets you run multiple versions of the same API simultaneously so that applications can continue to call previous API versions even after the latest versions are published.<br/>- API Gateway also helps you manage multiple release stages for each API version, such as alpha, beta, and production.                                                                                                                                                                                                                                         |     |
| [API Gateway Lambda authorizers](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-use-lambda-authorizer.html) | A Lambda authorizer (formerly known as a custom authorizer) is an API Gateway feature that uses a Lambda function to control access to your API. <br/>- A Lambda authorizer is useful if you want to implement a custom authorization scheme that uses a bearer token authentication strategy such as OAuth or SAML, or that uses request parameters to determine the caller's identity.                                                                                                                                                                                              |     |

## Key Limits

| Feature    | Limit                                                                                                                  |
|------------|------------------------------------------------------------------------------------------------------------------------|
| Throughput | Up to [10,000 requests per second](../../../../1_HLDDesignComponents/0_SystemGlossaries/Scalability/LatencyThroughput.md) |
| Payload    | Up to 10MB in the request payload                                                                                      |
| Protocol   | [API Gateway only works with HTTPS](https://docs.aws.amazon.com/apigateway/latest/developerguide/setup-http-integrations.html).                                                                                                                       |

# Types of API Gateway Endpoints

| Endpoint type                                                                                                                           | Remarks                                                                                                                                                                                                                                                                    |
|-----------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| :star: [Edge-optimized API endpoints](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-api-endpoint-types.html) | An edge-optimized API endpoint is best for geographically distributed clients. API requests are routed to the nearest CloudFront Point of Presence (POP). This is the default endpoint type for API Gateway REST APIs.                                                     |
| [Regional API endpoints](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-api-endpoint-types.html)              | A regional API endpoint is intended for clients in the same region. When a client running on an EC2 instance calls an API in the same region, or when an API is intended to serve a small number of clients with high demands, a regional API reduces connection overhead. |
| [Private API endpoints](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-api-endpoint-types.html)               | A private API endpoint is an API endpoint that can only be accessed from your Amazon Virtual Private Cloud (VPC) using an interface VPC endpoint, which is an endpoint network interface (ENI) that you create in your VPC.                                                |

# Custom Domain Names
- [Custom domain names](https://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-custom-domains.html) are simpler and more intuitive URLs that you can provide to your API users.

## Register a domain name
- You must have a registered internet domain name in order to set up custom domain names for your APIs. 
- If needed, you can register an internet domain using [Amazon Route 53](../../1_EdgeNetworking/AmazonRoute53.md) or using a third-party domain registrar of your choice. 
- An APIs custom domain name can be the name of a subdomain or the root domain (also known as "zone apex") of a registered internet domain.
- [After a custom domain name is created in API Gateway](https://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-custom-domains.html), you must create or update your DNS provider's resource record to map to your API endpoint. 
- Without such a mapping, API requests bound for the custom domain name cannot reach API Gateway.

# References
- [AWS re:Invent - I didn’t know Amazon API Gateway did that](https://www.youtube.com/watch?v=yfJZc3sJZ8E)
- [Implementing Microservices on AWS](https://docs.aws.amazon.com/whitepapers/latest/microservices-on-aws/microservices.html)
- [Can AWS API Gateway Act as a Load Balancer?](https://dashbird.io/blog/can-api-gateway-act-load-balancer/)
- [Building API-Driven Microservices with Amazon API Gateway - AWS Online Tech Talks](https://www.youtube.com/watch?v=xkDcBssNd1g)
- [Implementing a REST API with AWS (API Gateway, Lambda, and DynamoDB)](https://levelup.gitconnected.com/implementing-a-rest-api-with-aws-api-gateway-lambda-and-dynamodb-c62b8a1f6182)