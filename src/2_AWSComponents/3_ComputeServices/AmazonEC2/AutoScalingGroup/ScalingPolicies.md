# Types of Scaling

| Type            | Description                                                                                                                                                                  | Formula                                                     |
|-----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
| Fleet Scaling   | Maintain desired number of instances across AZs (for [high availability](../../../../1_HLDDesignComponents/0_SystemGlossaries/Reliability/HighAvailability.md)) at all time. | Desired-Capacity = Min-Capacity = Max-Capacity = Fleet-Size |
| Dynamic Scaling | Automatically increase or decrease resource capacity in relation to the demand                                                                                               | Based on demand                                             |

# Scaling Policies
- [AWS EC2 Auto Scaling](https://aws.amazon.com/getting-started/hands-on/ec2-auto-scaling-spot-instances/) enables you to automatically launch or terminate [Amazon EC2 instances](../Readme.md) based on user-defined policies, health status checks, and schedules.

| Scaling policy                                                                                                                           | Type of Scaling | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| :star: [Step Scaling](https://docs.aws.amazon.com/autoscaling/ec2/userguide/as-scaling-simple-step.html#simple-scaling-policies-aws-cli) | Dynamic Scaling | [Step scaling policy](https://docs.aws.amazon.com/autoscaling/ec2/userguide/as-scaling-simple-step.html#simple-scaling-policies-aws-cli) can continue to respond to additional alarms, even while a scaling activity or health check replacement is in progress. <br/>- Therefore, all alarms that are breached are evaluated by Amazon EC2 Auto Scaling as it receives the alarm messages.                                                                                                                                           |
| [Simple Scaling](https://docs.aws.amazon.com/autoscaling/ec2/userguide/as-scaling-simple-step.html)                                      | Dynamic Scaling | After a scaling activity is started, [the policy](https://docs.aws.amazon.com/autoscaling/ec2/userguide/as-scaling-simple-step.html) must wait for the scaling activity or health check replacement to complete and the [cooldown period](https://docs.aws.amazon.com/autoscaling/ec2/userguide/ec2-auto-scaling-scaling-cooldowns.html) to end before responding to additional alarms.<br/>- Cooldown periods help to prevent the initiation of additional scaling activities before the effects of previous activities are visible. |
| [Target Tracking](https://docs.aws.amazon.com/autoscaling/ec2/userguide/as-scaling-target-tracking.html)                                 | Dynamic Scaling | Target value that represents the ideal average utilization or throughput level for your application.<br/>- For example, let's say that you currently have an application that runs on two instances, and you want the CPU utilization of the Auto Scaling group to stay at around 50 percent when the load on the application changes. <br/>- This gives you extra capacity to handle traffic spikes without maintaining an excessive number of idle resources.                                                                       |
| [Scheduled scaling](https://docs.aws.amazon.com/autoscaling/ec2/userguide/ec2-auto-scaling-scheduled-scaling.html)                       | Fleet Scaling   | Best for Auto Scaling your EC2 instances for predictable traffic patterns.<br/>- To use scheduled scaling, you create scheduled actions. Scheduled actions are performed automatically as a function of date and time.                                                                                                                                                                                                                                                                                                                |

# Scaling Metrics

| Metric                                                                                                 | Description                                                                                                                                                                                                                                                                                                                                                                         |
|--------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| CPUUtilization                                                                                         | For example - Auto scale for CPU usage on a single instance rise above 80% for 5 mins.                                                                                                                                                                                                                                                                                              |
| Memory                                                                                                 | -                                                                                                                                                                                                                                                                                                                                                                                   |
| [Amazon SQS queue size](https://docs.aws.amazon.com/autoscaling/ec2/userguide/as-using-sqs-queue.html) | Based on the [Amazon SQS](../../../5_MessageBrokerServices/AmazonSQS.md) queue size, the [auto-scaling of the EC2 instances](https://docs.aws.amazon.com/autoscaling/ec2/userguide/as-using-sqs-queue.html) can also be done.<br/>- Example - [Send-SMS-API design (App Internal Clients, Multiple SMS-Providers, AutoScaling)](../../../../3_HLDDesignProblems/NotificationSystem) |

# Termination policy for Scale-In event

![img.png](assets/ASG-Default-Termination-Policy.drawio.png)

[Read more](https://docs.aws.amazon.com/autoscaling/ec2/userguide/ec2-auto-scaling-termination-policies.html)
